# localtags 关于一些细节的说明

本文对本软件的一些细节进行详细说明，不是必读的，用户不需要阅读本文也可正常使用本软件。可以在遇到疑惑时才阅读本文。

## 文件体积上限

单个文件上限默认 512MB (可在 config.json 中设置), 大文件请用压缩软件分卷后上传。

限制文件体积的原因有三个：

1. 我懒；
2. 我不喜欢大体积文件；
3. 在处理文件时（检查文件完整性、生成缩略图等）需要把整个文件读入内存，因此要避免爆内存。


## 关于图片等的预览

- 本软件利用浏览器来做 GUI 界面，为了减少代码量，利用浏览器的默认行为来预览文件。
- 在 "最近文件"(Files) 和 "最近图片"(Images) 页面中，点击支持预览的文件的缩略图（图标）即可预览。
- 我测试的结果是, Firefox 和 Chrome 在打开纯文本、图片、mp3, mp4, pdf 时默认预览（而不是下载），因此本软件暂时只支持预览这些文件。
- 如果你发现浏览器还能预览其他格式的文件，欢迎到 GitHub 给我提 issue.

### 预览与下载的区别

- **下载**必然会有一个复制文件的过程，复制主仓库中的文件到另一个文件夹，在硬盘中产生多一个文件。
- **预览**是让浏览器直接读取主仓库中的文件，不会在硬盘中复制文件，不会产生新文件。


## 本地 markdown 图库

- 在本软件的文件列表 (Files) 界面中点击后缀名为 `.md` 的文件的小图，可预览 markdown 的渲染效果。
- 如果点击文件列表中的图片文件的小图，浏览器会打开一个新标签页显示大图，此时，在地址栏可以看见类似这样的网址 `http://localhost:53549/mainbucket/F1K51`。
- 在 markdown 文件中写 `![图片名称](http://localhost:53549/mainbucket/F1K51)` 即可完成贴图。

按上述方法贴图后，不仅可在本软件中预览 markdown 时看到图片，而且，即使不使用本软件来预览，只要在运行了本软件的电脑中，用任何 markdown 编辑器 (比如 Typora, VS Code 等等) 进行预览，也都可以看到图片。因此，本软件可以当作是一个**本地 markdown 图库**。

### 注意事项

- 本软件的默认网址是 `http://127.0.0.1:53549`, 访问时，通常可以把 127.0.0.1 改为 localhost.
- 网址中的 `53549` 是端口，可在 config.json 文件中设置，但要注意，如果以后更改端口, markdown 文件中的贴图地址不会自动改变，因此更改端口会影响以前的贴图。
- 另外，还可以用这种格式贴图 `![图片名称](/mainbucket/F1K51)`, 这样的好处是，改端口也不会影响以前的贴图，贴图总是有效！但只在本软件中有效，这种贴图方法，用其他编辑器打开 markdown 文件时，就不能看到图片了。
- 建议采用 `![图片名称](http://localhost:53549/mainbucket/F1K51)` 的格式来贴图，因为默认端口 53549 是很罕见的，绝大多数情况下都不会遇到端口冲突，因此不用太担心这个问题。
